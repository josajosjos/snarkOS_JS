mod consensus_integration {
    use snarkos_consensus::{miner::Miner, test_data::*};
    use snarkos_dpc::dpc::base_dpc::instantiated::{Components, Tx};
    use snarkos_objects::{dpc::DPCTransactions, AccountPublicKey, BlockHeader, BlockHeaderHash, MerkleRootHash};
    use snarkos_storage::genesis::*;
    use snarkos_utilities::bytes::FromBytes;

    fn test_find_block(
        transactions: &DPCTransactions<Tx>,
        parent_header: &BlockHeader,
        expected_previous_block_hash: &BlockHeaderHash,
        expected_merkle_root_hash: &MerkleRootHash,
    ) {
        let consensus = TEST_CONSENSUS;
        let miner_address: AccountPublicKey<Components> = FromBytes::read(&GENESIS_ACCOUNT[..]).unwrap();
        let miner = Miner::new(miner_address, consensus);

        let header = miner.find_block(transactions, parent_header).unwrap();
        assert_eq!(header.previous_block_hash, *expected_previous_block_hash);
        assert_eq!(header.merkle_root_hash, *expected_merkle_root_hash);
    }

    fn test_verify_header(parent_header: &BlockHeader, child_header: &BlockHeader, merkle_root_hash: &MerkleRootHash) {
        let consensus = TEST_CONSENSUS;
        consensus
            .verify_header(child_header, parent_header, merkle_root_hash)
            .unwrap();
    }

    // CONSENSUS_PARAMS format: [ transaction_bytes, parent_header, child_header, parent_header_hash, merkle_root_hash ]
    const CONSENSUS_PARAMS: [([u8; 1889], BlockHeader, BlockHeader, BlockHeaderHash, MerkleRootHash); 2] = [
        (
            [
                2, 85, 142, 17, 45, 187, 142, 104, 80, 112, 200, 1, 76, 12, 184, 18, 196, 55, 146, 191, 195, 223, 46,
                200, 159, 95, 70, 159, 59, 126, 95, 4, 1, 177, 92, 139, 121, 199, 128, 217, 229, 193, 108, 101, 156,
                174, 249, 152, 10, 174, 238, 19, 217, 107, 106, 133, 41, 7, 19, 245, 113, 173, 38, 251, 16, 143, 224,
                44, 131, 78, 66, 164, 98, 206, 32, 94, 36, 226, 109, 246, 105, 57, 59, 199, 70, 98, 248, 200, 16, 154,
                139, 78, 90, 171, 6, 219, 10, 247, 252, 55, 70, 134, 205, 116, 92, 144, 219, 141, 212, 59, 189, 165,
                95, 157, 249, 187, 231, 70, 2, 75, 29, 214, 156, 230, 111, 38, 74, 111, 5, 2, 55, 191, 109, 142, 233,
                150, 90, 135, 58, 194, 38, 17, 35, 203, 89, 192, 180, 225, 44, 247, 123, 125, 62, 204, 185, 172, 79,
                217, 155, 157, 63, 4, 52, 240, 148, 69, 123, 81, 224, 249, 156, 18, 139, 173, 154, 63, 49, 73, 47, 81,
                32, 193, 28, 27, 111, 207, 151, 240, 88, 15, 17, 155, 65, 2, 231, 75, 228, 114, 135, 208, 195, 31, 92,
                247, 53, 36, 61, 207, 23, 120, 171, 237, 30, 191, 25, 26, 205, 200, 198, 242, 4, 197, 206, 134, 160, 6,
                179, 255, 97, 166, 205, 163, 230, 60, 103, 164, 53, 216, 100, 116, 153, 168, 225, 168, 229, 6, 255, 6,
                113, 41, 220, 254, 108, 106, 72, 143, 242, 15, 152, 194, 82, 7, 55, 153, 42, 110, 92, 46, 175, 33, 7,
                78, 50, 188, 28, 135, 228, 249, 178, 145, 162, 0, 222, 180, 242, 132, 215, 142, 222, 32, 189, 179, 24,
                83, 96, 113, 240, 116, 71, 157, 157, 66, 134, 12, 51, 1, 1, 58, 73, 6, 115, 109, 218, 157, 80, 24, 6,
                45, 9, 168, 36, 182, 251, 237, 87, 83, 41, 203, 213, 139, 22, 101, 156, 144, 248, 77, 132, 66, 18, 155,
                242, 73, 162, 180, 47, 152, 51, 236, 196, 76, 142, 23, 105, 0, 0, 228, 154, 49, 77, 111, 107, 60, 19,
                187, 221, 189, 210, 246, 244, 110, 234, 229, 90, 202, 62, 120, 85, 26, 68, 18, 193, 222, 184, 75, 17,
                157, 97, 86, 10, 195, 81, 8, 97, 175, 132, 91, 138, 56, 83, 129, 58, 3, 1, 71, 198, 136, 157, 15, 233,
                12, 93, 72, 128, 191, 137, 131, 61, 180, 241, 80, 20, 176, 147, 35, 215, 244, 18, 173, 156, 99, 142,
                84, 142, 97, 22, 193, 45, 3, 6, 143, 121, 118, 218, 139, 137, 173, 0, 125, 12, 255, 0, 108, 105, 77, 8,
                202, 32, 17, 106, 227, 142, 102, 103, 31, 6, 60, 116, 247, 249, 58, 68, 4, 125, 122, 58, 119, 140, 117,
                47, 99, 34, 42, 213, 5, 235, 171, 94, 172, 107, 60, 78, 212, 114, 225, 239, 136, 242, 34, 0, 121, 79,
                37, 17, 28, 63, 228, 207, 151, 77, 247, 15, 230, 30, 64, 112, 24, 8, 18, 192, 124, 181, 69, 103, 184,
                55, 79, 178, 63, 95, 241, 72, 18, 58, 58, 14, 8, 4, 16, 247, 60, 216, 214, 139, 231, 247, 212, 0, 0,
                140, 84, 189, 241, 163, 111, 143, 229, 15, 53, 121, 118, 216, 27, 23, 31, 101, 225, 25, 190, 56, 56,
                243, 137, 167, 94, 125, 212, 21, 177, 159, 209, 149, 9, 152, 165, 9, 24, 82, 173, 28, 206, 56, 41, 217,
                118, 91, 0, 92, 19, 75, 111, 75, 121, 218, 196, 124, 248, 54, 151, 153, 158, 183, 63, 150, 137, 51,
                104, 156, 129, 24, 200, 252, 19, 187, 126, 121, 151, 49, 76, 61, 107, 98, 235, 58, 234, 240, 136, 106,
                116, 237, 85, 247, 197, 173, 0, 0, 45, 144, 139, 248, 60, 138, 169, 100, 247, 142, 148, 38, 11, 122,
                191, 165, 154, 220, 133, 151, 123, 205, 253, 40, 139, 237, 10, 17, 24, 51, 194, 4, 7, 248, 255, 145,
                161, 198, 92, 66, 94, 127, 138, 255, 93, 29, 215, 133, 78, 12, 27, 158, 36, 39, 98, 241, 244, 47, 151,
                240, 193, 103, 108, 230, 181, 254, 98, 123, 223, 19, 184, 198, 215, 196, 40, 116, 163, 82, 68, 125,
                207, 133, 184, 34, 18, 197, 224, 84, 39, 158, 117, 132, 49, 185, 120, 62, 107, 30, 0, 0, 0, 0, 0, 0,
                212, 103, 102, 74, 66, 216, 255, 170, 105, 22, 206, 37, 160, 6, 185, 171, 89, 76, 144, 49, 68, 129, 84,
                254, 169, 153, 100, 64, 60, 180, 235, 169, 9, 51, 132, 18, 16, 154, 38, 12, 55, 53, 72, 113, 187, 40,
                194, 129, 134, 198, 25, 176, 28, 101, 202, 177, 56, 5, 1, 81, 56, 193, 87, 5, 86, 84, 233, 206, 86, 88,
                20, 212, 83, 103, 109, 113, 97, 97, 76, 145, 154, 2, 178, 176, 95, 131, 228, 80, 104, 48, 113, 131,
                211, 88, 100, 226, 28, 13, 0, 0, 0, 0, 0, 0, 0, 88, 15, 226, 187, 72, 167, 16, 46, 152, 255, 67, 96,
                96, 216, 1, 197, 165, 116, 184, 236, 144, 220, 162, 68, 86, 198, 132, 8, 123, 197, 74, 24, 94, 25, 101,
                92, 125, 91, 124, 162, 135, 180, 85, 182, 98, 115, 119, 69, 212, 146, 221, 10, 15, 88, 211, 5, 127,
                107, 168, 141, 81, 218, 186, 63, 158, 139, 183, 18, 83, 50, 135, 182, 182, 222, 225, 150, 44, 153, 95,
                244, 21, 239, 82, 82, 48, 72, 255, 231, 148, 1, 107, 79, 49, 156, 245, 8, 105, 27, 0, 0, 0, 0, 0, 0,
                116, 183, 173, 169, 187, 71, 200, 47, 196, 39, 46, 125, 231, 41, 246, 150, 115, 218, 26, 38, 124, 113,
                93, 80, 106, 124, 64, 113, 140, 172, 216, 63, 223, 237, 248, 100, 69, 208, 149, 246, 142, 212, 87, 173,
                130, 167, 74, 36, 33, 122, 191, 43, 4, 96, 109, 148, 116, 253, 69, 58, 235, 100, 235, 180, 9, 85, 129,
                2, 237, 101, 168, 210, 103, 254, 169, 39, 99, 132, 159, 40, 137, 161, 244, 156, 28, 44, 50, 101, 180,
                231, 155, 41, 181, 175, 200, 83, 149, 3, 0, 0, 0, 0, 0, 0, 135, 7, 9, 66, 230, 126, 104, 99, 51, 33,
                139, 21, 130, 62, 53, 178, 150, 71, 230, 174, 43, 228, 5, 126, 78, 233, 105, 149, 164, 54, 153, 221,
                250, 255, 202, 2, 184, 62, 87, 106, 133, 11, 45, 4, 114, 164, 65, 105, 218, 31, 216, 241, 124, 197,
                138, 227, 208, 172, 198, 72, 10, 158, 0, 122, 135, 230, 43, 101, 137, 40, 195, 53, 191, 193, 53, 71,
                65, 198, 124, 58, 189, 5, 180, 32, 3, 8, 198, 33, 139, 135, 125, 219, 67, 13, 89, 246, 0, 44, 0, 0, 0,
                0, 0, 0, 138, 167, 241, 126, 173, 57, 168, 11, 139, 154, 152, 192, 106, 122, 239, 4, 62, 218, 43, 15,
                146, 166, 146, 34, 201, 169, 10, 42, 252, 149, 32, 143, 154, 88, 229, 235, 223, 61, 141, 107, 212, 231,
                185, 12, 89, 80, 72, 201, 18, 167, 193, 197, 42, 120, 254, 110, 92, 51, 41, 23, 25, 16, 232, 190, 68,
                186, 210, 52, 103, 35, 78, 230, 85, 106, 118, 91, 238, 117, 130, 208, 176, 70, 245, 208, 64, 202, 21,
                65, 89, 221, 100, 224, 7, 106, 181, 166, 173, 1, 0, 0, 0, 0, 0, 0, 207, 82, 6, 204, 140, 250, 109, 195,
                12, 132, 203, 234, 20, 102, 169, 77, 99, 93, 228, 202, 121, 63, 136, 215, 33, 99, 243, 229, 21, 129,
                155, 36, 185, 223, 238, 234, 7, 215, 149, 52, 70, 81, 131, 143, 150, 163, 199, 198, 195, 221, 161, 87,
                184, 117, 2, 30, 10, 78, 29, 150, 189, 167, 94, 154, 75, 108, 129, 230, 111, 245, 131, 132, 198, 213,
                57, 221, 182, 75, 142, 117, 120, 137, 135, 112, 32, 244, 106, 7, 56, 167, 164, 2, 225, 235, 40, 57,
                219, 49, 0, 0, 0, 0, 0, 0, 14, 48, 57, 184, 150, 135, 57, 222, 49, 116, 218, 102, 246, 243, 115, 219,
                125, 143, 15, 99, 251, 154, 83, 90, 150, 143, 130, 177, 86, 252, 32, 141, 205, 59, 156, 203, 19, 142,
                131, 157, 201, 94, 248, 187, 205, 97, 70, 68, 116, 71, 135, 33, 156, 213, 32, 69, 90, 0, 239, 107, 168,
                26, 253, 183, 36, 173, 154, 146, 213, 0, 149, 107, 5, 65, 47, 28, 127, 141, 185, 166, 189, 178, 219,
                109, 8, 103, 14, 148, 201, 172, 48, 191, 100, 12, 255, 161, 195, 27, 0, 0, 0, 0, 0, 0, 0, 223, 111, 18,
                250, 21, 3, 162, 49, 122, 212, 81, 39, 206, 82, 193, 32, 122, 148, 212, 83, 19, 191, 167, 253, 77, 239,
                182, 235, 77, 209, 19, 104, 82, 88, 203, 121, 100, 36, 102, 172, 174, 32, 194, 75, 35, 97, 33, 215,
                206, 75, 50, 249, 44, 66, 53, 104, 182, 173, 8, 82, 171, 246, 15, 144, 186, 208, 224, 68, 35, 241, 1,
                178, 98, 6, 84, 60, 152, 177, 156, 251, 128, 237, 109, 59, 30, 50, 124, 101, 189, 243, 8, 115, 42, 121,
                245, 114, 64, 1, 0, 0, 0, 0, 0, 0, 76, 244, 6, 90, 195, 79, 129, 85, 133, 106, 188, 156, 129, 246, 23,
                89, 94, 30, 103, 130, 233, 244, 9, 66, 67, 199, 191, 22, 81, 254, 85, 216, 180, 2, 114, 201, 76, 82,
                11, 240, 48, 232, 74, 50, 209, 198, 169, 32, 78, 74, 74, 133, 143, 28, 60, 133, 142, 36, 8, 51, 123,
                208, 61, 220, 38, 138, 174, 158, 157, 48, 248, 22, 188, 231, 86, 222, 150, 247, 237, 36, 215, 203, 53,
                98, 117, 178, 10, 7, 120, 28, 168, 71, 149, 141, 233, 158, 13, 40, 0, 0, 0, 0, 0, 0, 0, 92, 2, 178, 76,
                54, 75, 194, 51, 219, 235, 245, 3, 104, 196, 172, 72, 159, 44, 15, 157, 60, 84, 184, 15, 151, 189, 177,
                21, 96, 177, 9, 101, 129, 68, 207, 189, 237, 172, 152, 196, 88, 156, 2, 143, 194, 34, 150, 113, 233,
                62, 204, 157, 72, 231, 79, 215, 200, 251, 66, 245, 170, 39, 24, 16, 0, 31, 10, 250, 255, 255, 255, 255,
                2, 76, 165, 26, 48, 177, 201, 211, 77, 140, 141, 195, 164, 147, 91, 149, 146, 93, 43, 24, 218, 242,
                151, 197, 32, 83, 45, 31, 126, 42, 115, 177, 0, 178, 191, 26, 67, 69, 187, 186, 53, 87, 178, 49, 150,
                143, 219, 121, 43, 218, 171, 238, 66, 176, 72, 205, 25, 78, 3, 113, 213, 137, 129, 213, 3, 181, 41, 96,
                244, 206, 252, 101, 242, 190, 25, 102, 37, 239, 209, 111, 181, 169, 227, 182, 4, 110, 229, 29, 148, 25,
                155, 86, 116, 220, 184, 150, 1, 248, 98, 54, 77, 20, 154, 246, 162, 145, 78, 114, 224, 141, 192, 129,
                124, 29, 38, 238, 127, 175, 241, 88, 199, 9, 36, 219, 94, 81, 127, 3, 3,
            ],
            BlockHeader {
                previous_block_hash: BlockHeaderHash([0u8; 32]),
                merkle_root_hash: MerkleRootHash([0u8; 32]),
                time: 0i64,
                difficulty_target: 0x07FF_FFFF_FFFF_FFFF_u64,
                nonce: 0u32,
            },
            BlockHeader {
                previous_block_hash: BlockHeaderHash([
                    34, 41, 138, 133, 212, 97, 218, 105, 103, 149, 244, 65, 29, 63, 202, 157, 79, 184, 117, 83, 54,
                    165, 78, 178, 91, 245, 248, 4, 235, 112, 78, 121,
                ]),
                merkle_root_hash: MerkleRootHash([
                    146, 38, 200, 129, 117, 77, 201, 209, 191, 211, 92, 161, 223, 125, 253, 21, 131, 131, 11, 192, 215,
                    54, 111, 128, 84, 13, 177, 27, 102, 214, 154, 15,
                ]),
                time: 0i64,
                difficulty_target: 17_762_688_379_536_359_781_u64,
                nonce: 0u32,
            },
            BlockHeaderHash([
                34, 41, 138, 133, 212, 97, 218, 105, 103, 149, 244, 65, 29, 63, 202, 157, 79, 184, 117, 83, 54, 165,
                78, 178, 91, 245, 248, 4, 235, 112, 78, 121,
            ]),
            MerkleRootHash([
                146, 38, 200, 129, 117, 77, 201, 209, 191, 211, 92, 161, 223, 125, 253, 21, 131, 131, 11, 192, 215, 54,
                111, 128, 84, 13, 177, 27, 102, 214, 154, 15,
            ]),
        ),
        (
            [
                2, 85, 142, 17, 45, 187, 142, 104, 80, 112, 200, 1, 76, 12, 184, 18, 196, 55, 146, 191, 195, 223, 46,
                200, 159, 95, 70, 159, 59, 126, 95, 4, 1, 177, 92, 139, 121, 199, 128, 217, 229, 193, 108, 101, 156,
                174, 249, 152, 10, 174, 238, 19, 217, 107, 106, 133, 41, 7, 19, 245, 113, 173, 38, 251, 16, 143, 224,
                44, 131, 78, 66, 164, 98, 206, 32, 94, 36, 226, 109, 246, 105, 57, 59, 199, 70, 98, 248, 200, 16, 154,
                139, 78, 90, 171, 6, 219, 10, 247, 252, 55, 70, 134, 205, 116, 92, 144, 219, 141, 212, 59, 189, 165,
                95, 157, 249, 187, 231, 70, 2, 75, 29, 214, 156, 230, 111, 38, 74, 111, 5, 2, 55, 191, 109, 142, 233,
                150, 90, 135, 58, 194, 38, 17, 35, 203, 89, 192, 180, 225, 44, 247, 123, 125, 62, 204, 185, 172, 79,
                217, 155, 157, 63, 4, 52, 240, 148, 69, 123, 81, 224, 249, 156, 18, 139, 173, 154, 63, 49, 73, 47, 81,
                32, 193, 28, 27, 111, 207, 151, 240, 88, 15, 17, 155, 65, 2, 231, 75, 228, 114, 135, 208, 195, 31, 92,
                247, 53, 36, 61, 207, 23, 120, 171, 237, 30, 191, 25, 26, 205, 200, 198, 242, 4, 197, 206, 134, 160, 6,
                179, 255, 97, 166, 205, 163, 230, 60, 103, 164, 53, 216, 100, 116, 153, 168, 225, 168, 229, 6, 255, 6,
                113, 41, 220, 254, 108, 106, 72, 143, 242, 15, 152, 194, 82, 7, 55, 153, 42, 110, 92, 46, 175, 33, 7,
                78, 50, 188, 28, 135, 228, 249, 178, 145, 162, 0, 222, 180, 242, 132, 215, 142, 222, 32, 189, 179, 24,
                83, 96, 113, 240, 116, 71, 157, 157, 66, 134, 12, 51, 1, 1, 58, 73, 6, 115, 109, 218, 157, 80, 24, 6,
                45, 9, 168, 36, 182, 251, 237, 87, 83, 41, 203, 213, 139, 22, 101, 156, 144, 248, 77, 132, 66, 18, 155,
                242, 73, 162, 180, 47, 152, 51, 236, 196, 76, 142, 23, 105, 0, 0, 228, 154, 49, 77, 111, 107, 60, 19,
                187, 221, 189, 210, 246, 244, 110, 234, 229, 90, 202, 62, 120, 85, 26, 68, 18, 193, 222, 184, 75, 17,
                157, 97, 86, 10, 195, 81, 8, 97, 175, 132, 91, 138, 56, 83, 129, 58, 3, 1, 71, 198, 136, 157, 15, 233,
                12, 93, 72, 128, 191, 137, 131, 61, 180, 241, 80, 20, 176, 147, 35, 215, 244, 18, 173, 156, 99, 142,
                84, 142, 97, 22, 193, 45, 3, 6, 143, 121, 118, 218, 139, 137, 173, 0, 125, 12, 255, 0, 108, 105, 77, 8,
                202, 32, 17, 106, 227, 142, 102, 103, 31, 6, 60, 116, 247, 249, 58, 68, 4, 125, 122, 58, 119, 140, 117,
                47, 99, 34, 42, 213, 5, 235, 171, 94, 172, 107, 60, 78, 212, 114, 225, 239, 136, 242, 34, 0, 121, 79,
                37, 17, 28, 63, 228, 207, 151, 77, 247, 15, 230, 30, 64, 112, 24, 8, 18, 192, 124, 181, 69, 103, 184,
                55, 79, 178, 63, 95, 241, 72, 18, 58, 58, 14, 8, 4, 16, 247, 60, 216, 214, 139, 231, 247, 212, 0, 0,
                140, 84, 189, 241, 163, 111, 143, 229, 15, 53, 121, 118, 216, 27, 23, 31, 101, 225, 25, 190, 56, 56,
                243, 137, 167, 94, 125, 212, 21, 177, 159, 209, 149, 9, 152, 165, 9, 24, 82, 173, 28, 206, 56, 41, 217,
                118, 91, 0, 92, 19, 75, 111, 75, 121, 218, 196, 124, 248, 54, 151, 153, 158, 183, 63, 150, 137, 51,
                104, 156, 129, 24, 200, 252, 19, 187, 126, 121, 151, 49, 76, 61, 107, 98, 235, 58, 234, 240, 136, 106,
                116, 237, 85, 247, 197, 173, 0, 0, 45, 144, 139, 248, 60, 138, 169, 100, 247, 142, 148, 38, 11, 122,
                191, 165, 154, 220, 133, 151, 123, 205, 253, 40, 139, 237, 10, 17, 24, 51, 194, 4, 7, 248, 255, 145,
                161, 198, 92, 66, 94, 127, 138, 255, 93, 29, 215, 133, 78, 12, 27, 158, 36, 39, 98, 241, 244, 47, 151,
                240, 193, 103, 108, 230, 181, 254, 98, 123, 223, 19, 184, 198, 215, 196, 40, 116, 163, 82, 68, 125,
                207, 133, 184, 34, 18, 197, 224, 84, 39, 158, 117, 132, 49, 185, 120, 62, 107, 30, 0, 0, 0, 0, 0, 0,
                212, 103, 102, 74, 66, 216, 255, 170, 105, 22, 206, 37, 160, 6, 185, 171, 89, 76, 144, 49, 68, 129, 84,
                254, 169, 153, 100, 64, 60, 180, 235, 169, 9, 51, 132, 18, 16, 154, 38, 12, 55, 53, 72, 113, 187, 40,
                194, 129, 134, 198, 25, 176, 28, 101, 202, 177, 56, 5, 1, 81, 56, 193, 87, 5, 86, 84, 233, 206, 86, 88,
                20, 212, 83, 103, 109, 113, 97, 97, 76, 145, 154, 2, 178, 176, 95, 131, 228, 80, 104, 48, 113, 131,
                211, 88, 100, 226, 28, 13, 0, 0, 0, 0, 0, 0, 0, 88, 15, 226, 187, 72, 167, 16, 46, 152, 255, 67, 96,
                96, 216, 1, 197, 165, 116, 184, 236, 144, 220, 162, 68, 86, 198, 132, 8, 123, 197, 74, 24, 94, 25, 101,
                92, 125, 91, 124, 162, 135, 180, 85, 182, 98, 115, 119, 69, 212, 146, 221, 10, 15, 88, 211, 5, 127,
                107, 168, 141, 81, 218, 186, 63, 158, 139, 183, 18, 83, 50, 135, 182, 182, 222, 225, 150, 44, 153, 95,
                244, 21, 239, 82, 82, 48, 72, 255, 231, 148, 1, 107, 79, 49, 156, 245, 8, 105, 27, 0, 0, 0, 0, 0, 0,
                116, 183, 173, 169, 187, 71, 200, 47, 196, 39, 46, 125, 231, 41, 246, 150, 115, 218, 26, 38, 124, 113,
                93, 80, 106, 124, 64, 113, 140, 172, 216, 63, 223, 237, 248, 100, 69, 208, 149, 246, 142, 212, 87, 173,
                130, 167, 74, 36, 33, 122, 191, 43, 4, 96, 109, 148, 116, 253, 69, 58, 235, 100, 235, 180, 9, 85, 129,
                2, 237, 101, 168, 210, 103, 254, 169, 39, 99, 132, 159, 40, 137, 161, 244, 156, 28, 44, 50, 101, 180,
                231, 155, 41, 181, 175, 200, 83, 149, 3, 0, 0, 0, 0, 0, 0, 135, 7, 9, 66, 230, 126, 104, 99, 51, 33,
                139, 21, 130, 62, 53, 178, 150, 71, 230, 174, 43, 228, 5, 126, 78, 233, 105, 149, 164, 54, 153, 221,
                250, 255, 202, 2, 184, 62, 87, 106, 133, 11, 45, 4, 114, 164, 65, 105, 218, 31, 216, 241, 124, 197,
                138, 227, 208, 172, 198, 72, 10, 158, 0, 122, 135, 230, 43, 101, 137, 40, 195, 53, 191, 193, 53, 71,
                65, 198, 124, 58, 189, 5, 180, 32, 3, 8, 198, 33, 139, 135, 125, 219, 67, 13, 89, 246, 0, 44, 0, 0, 0,
                0, 0, 0, 138, 167, 241, 126, 173, 57, 168, 11, 139, 154, 152, 192, 106, 122, 239, 4, 62, 218, 43, 15,
                146, 166, 146, 34, 201, 169, 10, 42, 252, 149, 32, 143, 154, 88, 229, 235, 223, 61, 141, 107, 212, 231,
                185, 12, 89, 80, 72, 201, 18, 167, 193, 197, 42, 120, 254, 110, 92, 51, 41, 23, 25, 16, 232, 190, 68,
                186, 210, 52, 103, 35, 78, 230, 85, 106, 118, 91, 238, 117, 130, 208, 176, 70, 245, 208, 64, 202, 21,
                65, 89, 221, 100, 224, 7, 106, 181, 166, 173, 1, 0, 0, 0, 0, 0, 0, 207, 82, 6, 204, 140, 250, 109, 195,
                12, 132, 203, 234, 20, 102, 169, 77, 99, 93, 228, 202, 121, 63, 136, 215, 33, 99, 243, 229, 21, 129,
                155, 36, 185, 223, 238, 234, 7, 215, 149, 52, 70, 81, 131, 143, 150, 163, 199, 198, 195, 221, 161, 87,
                184, 117, 2, 30, 10, 78, 29, 150, 189, 167, 94, 154, 75, 108, 129, 230, 111, 245, 131, 132, 198, 213,
                57, 221, 182, 75, 142, 117, 120, 137, 135, 112, 32, 244, 106, 7, 56, 167, 164, 2, 225, 235, 40, 57,
                219, 49, 0, 0, 0, 0, 0, 0, 14, 48, 57, 184, 150, 135, 57, 222, 49, 116, 218, 102, 246, 243, 115, 219,
                125, 143, 15, 99, 251, 154, 83, 90, 150, 143, 130, 177, 86, 252, 32, 141, 205, 59, 156, 203, 19, 142,
                131, 157, 201, 94, 248, 187, 205, 97, 70, 68, 116, 71, 135, 33, 156, 213, 32, 69, 90, 0, 239, 107, 168,
                26, 253, 183, 36, 173, 154, 146, 213, 0, 149, 107, 5, 65, 47, 28, 127, 141, 185, 166, 189, 178, 219,
                109, 8, 103, 14, 148, 201, 172, 48, 191, 100, 12, 255, 161, 195, 27, 0, 0, 0, 0, 0, 0, 0, 223, 111, 18,
                250, 21, 3, 162, 49, 122, 212, 81, 39, 206, 82, 193, 32, 122, 148, 212, 83, 19, 191, 167, 253, 77, 239,
                182, 235, 77, 209, 19, 104, 82, 88, 203, 121, 100, 36, 102, 172, 174, 32, 194, 75, 35, 97, 33, 215,
                206, 75, 50, 249, 44, 66, 53, 104, 182, 173, 8, 82, 171, 246, 15, 144, 186, 208, 224, 68, 35, 241, 1,
                178, 98, 6, 84, 60, 152, 177, 156, 251, 128, 237, 109, 59, 30, 50, 124, 101, 189, 243, 8, 115, 42, 121,
                245, 114, 64, 1, 0, 0, 0, 0, 0, 0, 76, 244, 6, 90, 195, 79, 129, 85, 133, 106, 188, 156, 129, 246, 23,
                89, 94, 30, 103, 130, 233, 244, 9, 66, 67, 199, 191, 22, 81, 254, 85, 216, 180, 2, 114, 201, 76, 82,
                11, 240, 48, 232, 74, 50, 209, 198, 169, 32, 78, 74, 74, 133, 143, 28, 60, 133, 142, 36, 8, 51, 123,
                208, 61, 220, 38, 138, 174, 158, 157, 48, 248, 22, 188, 231, 86, 222, 150, 247, 237, 36, 215, 203, 53,
                98, 117, 178, 10, 7, 120, 28, 168, 71, 149, 141, 233, 158, 13, 40, 0, 0, 0, 0, 0, 0, 0, 92, 2, 178, 76,
                54, 75, 194, 51, 219, 235, 245, 3, 104, 196, 172, 72, 159, 44, 15, 157, 60, 84, 184, 15, 151, 189, 177,
                21, 96, 177, 9, 101, 129, 68, 207, 189, 237, 172, 152, 196, 88, 156, 2, 143, 194, 34, 150, 113, 233,
                62, 204, 157, 72, 231, 79, 215, 200, 251, 66, 245, 170, 39, 24, 16, 0, 31, 10, 250, 255, 255, 255, 255,
                2, 76, 165, 26, 48, 177, 201, 211, 77, 140, 141, 195, 164, 147, 91, 149, 146, 93, 43, 24, 218, 242,
                151, 197, 32, 83, 45, 31, 126, 42, 115, 177, 0, 178, 191, 26, 67, 69, 187, 186, 53, 87, 178, 49, 150,
                143, 219, 121, 43, 218, 171, 238, 66, 176, 72, 205, 25, 78, 3, 113, 213, 137, 129, 213, 3, 181, 41, 96,
                244, 206, 252, 101, 242, 190, 25, 102, 37, 239, 209, 111, 181, 169, 227, 182, 4, 110, 229, 29, 148, 25,
                155, 86, 116, 220, 184, 150, 1, 248, 98, 54, 77, 20, 154, 246, 162, 145, 78, 114, 224, 141, 192, 129,
                124, 29, 38, 238, 127, 175, 241, 88, 199, 9, 36, 219, 94, 81, 127, 3, 3,
            ],
            BlockHeader {
                previous_block_hash: BlockHeaderHash([0u8; 32]),
                merkle_root_hash: MerkleRootHash([0u8; 32]),
                time: 0i64,
                difficulty_target: 0x0000_7FFF_FFFF_FFFF_u64,
                nonce: 69950u32,
            },
            BlockHeader {
                previous_block_hash: BlockHeaderHash([
                    71, 96, 136, 138, 156, 60, 0, 0, 172, 219, 151, 28, 109, 226, 132, 171, 235, 109, 113, 92, 207, 54,
                    69, 213, 19, 158, 217, 13, 154, 191, 146, 241,
                ]),
                merkle_root_hash: MerkleRootHash([
                    146, 38, 200, 129, 117, 77, 201, 209, 191, 211, 92, 161, 223, 125, 253, 21, 131, 131, 11, 192, 215,
                    54, 111, 128, 84, 13, 177, 27, 102, 214, 154, 15,
                ]),
                time: 0i64,
                difficulty_target: 17_730_728_272_220_445_192_u64,
                nonce: 55793u32,
            },
            BlockHeaderHash([
                71, 96, 136, 138, 156, 60, 0, 0, 172, 219, 151, 28, 109, 226, 132, 171, 235, 109, 113, 92, 207, 54, 69,
                213, 19, 158, 217, 13, 154, 191, 146, 241,
            ]),
            MerkleRootHash([
                146, 38, 200, 129, 117, 77, 201, 209, 191, 211, 92, 161, 223, 125, 253, 21, 131, 131, 11, 192, 215, 54,
                111, 128, 84, 13, 177, 27, 102, 214, 154, 15,
            ]),
        ),
    ];

    #[test]
    fn find_valid_block() {
        CONSENSUS_PARAMS.iter().for_each(
            |(transaction_bytes, parent_header, _, expected_previous_block_hash, expected_merkle_root_hash)| {
                let transaction = Tx::read(&transaction_bytes[..]).unwrap();
                let transactions = DPCTransactions(vec![transaction]);

                test_find_block(
                    &transactions,
                    parent_header,
                    expected_previous_block_hash,
                    expected_merkle_root_hash,
                );
            },
        );
    }

    #[test]
    fn verify_header() {
        CONSENSUS_PARAMS
            .iter()
            .for_each(|(_, parent_header, child_header, _, expected_merkle_root_hash)| {
                test_verify_header(parent_header, child_header, expected_merkle_root_hash);
            });
    }
}
